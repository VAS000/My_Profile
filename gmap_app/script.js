$(function(){function e(e){for(var o=0;o<w.length;o++)if(w[o].ID===e)return o;return!1}function o(o,l){var t=e(o);return w[t].lat=l.lat().toFixed(h),w[t].lng=l.lng().toFixed(h),!1!==t}function l(e){for(var o=0;o<w.length;o++)if(w[o].ID==e)return w[o].setOptions({editable:!0,draggable:!0}),!0}function t(e){for(var o=0;o<w.length;o++)if(w[o].ID==e)return!0;return!1}function a(e){var l=$("#marker_id").val();if(t(l))alert("Please Choose Unique ID");else if(0===l.length||l.length>10)alert("ID Must Between 1 Or 10 Characters");else{var a=$("#marker_text").val();if(a.length>2)alert("ID Must Be Maximum 2 Characters");else{var n=$("#marker_info_text").val();if(n.length>100)alert("Max Characters Allowed: 100");else{var r="";if(n.length>0){r='<div class="marker-content" style="color: '+$("#marker_info_color").val()+'"><h4>',r+=n+"</h4></div>";var i=new google.maps.InfoWindow({content:r})}var s=new google.maps.Marker({position:{lat:e.lat(),lng:e.lng()},map:_,draggable:!1,animation:google.maps.Animation.DROP,ID:l,infoWindowText:r,editable:!1});a.length>0&&s.setOptions({label:{text:a,color:$("#marker_label_color").val()}}),google.maps.event.addListener(s,"mouseover",function(e){this.infoWindowText.length>0&&i.open(_,this)}),google.maps.event.addListener(s,"mouseout",function(e){this.infoWindowText.length>0&&i.close()}),google.maps.event.addListener(s,"dragend",function(e){o(s.ID,e.latLng)?(alert("Marker Updated Successfully"),this.setOptions({editable:!1,draggable:!1})):alert('Error Updating Marker "'+this.id+'"')}),w.push(s),$("#marker_id").val(""),$("#marker_text").val(""),$("#marker_info_text").val(""),$("#marker_label_color").val("#FFFFFF"),$("#marker_info_color").val("#333333")}}}}function n(e){for(var o=void 0,l=0;l<w.length;l++)if(w[l].ID==e){o=l;break}return void 0!==o&&(w[o].setMap(null),w.splice(o,1),!0)}function r(e){for(var o=0;o<w.length;o++){var l='<option value="'+w[o].ID+'">'+w[o].ID+"</option>";e.append(l)}}function i(e){for(var o=0;o<k.length;o++)if(k[o].get("name")==e){k[o].setOptions({editable:!0,draggable:!1});var l=!1;google.maps.event.addListener(k[o],"click",function(e){l?(this.setOptions({editable:!1,draggable:!1}),google.maps.event.clearListeners(this,"click")):(this.setOptions({draggable:!0}),l=!l,alert("Please Click Again To Confirm OR Drag The Polygon If You Want"))});break}}function s(e){for(var o=void 0,l=0;l<k.length;l++)if(k[l].get("name")==e){o=l;break}return void 0!==o&&(k[o].setMap(null),k.splice(o,1),!0)}function g(e){for(var o=0;o<k.length;o++)if(k[o].get("name")==e)return!0;return!1}function p(){$("#polygon_name").prop("disabled",!0),$("#polygon_stroke_color").prop("disabled",!0),$("#polygon_stroke_weight").prop("disabled",!0),$("#polygon_stroke_opacity").prop("disabled",!0),$("#polygon_fill_color").prop("disabled",!0),$("#polygon_fill_opacity").prop("disabled",!0)}function c(){$("#polygon_name").prop("disabled",!1),$("#polygon_stroke_color").prop("disabled",!1),$("#polygon_stroke_weight").prop("disabled",!1),$("#polygon_stroke_opacity").prop("disabled",!1),$("#polygon_fill_color").prop("disabled",!1),$("#polygon_fill_opacity").prop("disabled",!1)}function d(e){m.setMap(null),u.push(new google.maps.LatLng(e.lat().toFixed(h),e.lng().toFixed(h)));var o={path:u,strokeColor:$("#polygon_stroke_color").val(),strokeWeight:$("#polygon_stroke_weight").val(),strokeOpacity:$("#polygon_stroke_opacity").val(),fillColor:$("#polygon_fill_color").val(),fillOpacity:$("#polygon_fill_opacity").val(),editable:!0,name:$("#polygon_name").val()};(m=new google.maps.Polygon(o)).setMap(_),google.maps.event.addListener(m,"click",function(e,o){this.setEditable(!1),u=new google.maps.MVCArray,m=new google.maps.Polygon,k.push(this),b=!0,c(),y=!1,google.maps.event.clearListeners(this,"click"),$("#polygon_stroke_color").val("#FF4848"),$("#polygon_stroke_weight").val("3"),$("#polygon_stroke_opacity").val("0.3"),$("#polygon_fill_color").val("#7272FF"),$("#polygon_fill_opacity").val("0.3"),$("#polygon_name").val("")}),google.maps.event.addListener(m,"dragend",function(e){alert("Polygon Updated Successfully"),this.setOptions({draggable:!1,editable:!1})})}function f(e){var o=$("#polygon_name").val();if(g(o))alert("Please Choose Unique Polygon Name");else if(0!=o.length){p(),u.push(new google.maps.LatLng(e.lat().toFixed(h),e.lng().toFixed(h)));var l={path:u,strokeColor:$("#polygon_stroke_color").val(),strokeWeight:$("#polygon_stroke_weight").val(),strokeOpacity:$("#polygon_stroke_opacity").val(),fillColor:$("#polygon_fill_color").val(),fillOpacity:$("#polygon_fill_opacity").val(),editable:!0,name:o};(m=new google.maps.Polygon(l)).setMap(_),b=!1}else alert("Polygon Name Should Not Be Empty")}function v(e){for(var o=0;o<k.length;o++){var l='<option value="'+k[o].get("name")+'">'+k[o].get("name")+"</option>";e.append(l)}}var _,y,m,u=new google.maps.MVCArray,k=new Array,h=4,b=!0,w=new Array;$(".gmap").height($(window).height()-"8"),$(".control-list li").on("click",function(){$(".control-list li").removeClass("active"),$(this).addClass("active"),$(".control-area").hide();var e=$(this).data("section");$("."+e).slideDown(350)}),$(".control-area button.add").on("click",function(){y=$(this).data("section"),$(this).text("Active").addClass("active")}),$("#marker_visibility, #marker_delete, #marker_edit").on("click",function(){var e=$("."+$(this).attr("id")).find("select");e.empty(),r(e)}),$(".marker_visibility button").on("click",function(){var e=$(".marker_visibility select").val();if(e){var o="false"!==$(".marker_visibility input[name=m_visibility]:checked").val();if(t(e)){for(var l=0;l<w.length;l++)if(w[l].ID==e){w[l].setVisible(o);break}}else alert("Label Not Found!")}else alert("No Marker To Select")}),$(".marker_delete button").on("click",function(){var e=$(".marker_delete select"),o=e.val();if(o)if($('.marker_delete input[name="m_confirm"]').is(":checked")){for(var l=0;l<w.length;l++)if(w[l].ID==o){n(o)?(alert("Marker Deleted Successfully"),e.empty(),r(e)):alert('Error Removing Marker "'+o+'"');break}}else alert("Please Confirm The Delete Operation");else alert("No Marker To Select")}),$(".marker_edit button").on("click",function(){var e=$(".marker_edit select").val();if(e){for(o=0;o<w.length;o++)w[o].setOptions({draggable:!1,editable:!1});for(var o=0;o<w.length;o++)if(w[o].ID==e){l(e)?alert("You Can Move The Marker"):alert('Error Updating Marker "'+e+'"');break}}else alert("No Marker To Select")}),$("#polygon_visibility, #polygon_delete, #polygon_edit").on("click",function(){var e=$("."+$(this).attr("id")).find("select");e.empty(),v(e)}),$(".polygon_visibility button").on("click",function(){var e=$(".polygon_visibility select").val();if(e){var o="false"!==$(".polygon_visibility input[name=p_visibility]:checked").val();if(g(e)){for(var l=0;l<k.length;l++)if(k[l].get("name")==e){k[l].setVisible(o);break}}else alert("Polygon Name Not Found!")}else alert("No Polygon To Select")}),$(".polygon_delete button").on("click",function(){var e=$(".polygon_delete select"),o=e.val();if(o)if($('.polygon_delete input[name="p_confirm"]').is(":checked")){for(var l=0;l<k.length;l++)if(k[l].get("name")==o){s(o)?(alert("Polygon Deleted Successfully"),e.empty(),v(e)):alert('Error Removing Polygon "'+o+'"');break}}else alert("Please Confirm The Delete Operation");else alert("No Polygon To Select")}),$(".polygon_edit button").on("click",function(){var e=$(".polygon_edit select").val();if(e){for(o=0;o<k.length;o++)k[o].setOptions({draggable:!1,editable:!1});for(var o=0;o<k.length;o++)if(k[o].get("name")==e){i(e),alert("You Can Update The Polygon");break}}else alert("No Polygon To Select")}),function(){var e={center:new google.maps.LatLng(-37.82,144.95),zoom:14,draggableCursor:"crosshair"};_=new google.maps.Map(document.getElementById("gmap"),e),google.maps.event.addListener(_,"click",function(e){"marker"===y?(a(e.latLng),y=!1):"polygon"===y&&(b?f(e.latLng):d(e.latLng)),$(".control-area .box button").removeClass("active").text("Apply")})}()});